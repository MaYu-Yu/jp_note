# 🎌 日語學習筆記本 (Japanese Learning Notebook)

這是一個專為日語學習者打造的全端 Web 應用程式。整合了 **單字 (Vocabulary)** 與 **文法 (Grammar)** 的筆記管理功能，並內建強大的 **單字卡 (Flashcards)** 系統，支援語音導讀 (TTS) 與自動播放，幫助使用者高效率複習日語。

---

## ✨ 核心功能

### 1. 資料管理系統

* **雙模式筆記**：

  * **單字模式**：紀錄單字、假名讀音、詞性（動詞／形容詞／名詞等）、中文解釋、例句。
  * **文法模式**：紀錄文法條目、接續方式、中文解釋、例句。
* **靈活分類**：支援自定義分類標籤（如 `N1`、`生活用語`、`動詞變化`），可多重標籤管理。
* **CRUD 操作**：完整的查詢、新增、編輯、刪除功能。
* **安全防護**：前端與後端皆具備 SQL Injection 防護與空白字元過濾機制。

### 2. 智慧單字卡學習 (Flashcards)

* **客製化學習範圍**：可針對「特定詞性」、「特定分類」或「特定資料類型（單字／文法）」建立學習牌組。
* **自動播放模式**：

  * **免手動操作**：支援 3～10 秒的自動翻頁循環，適合通勤或背景播放。
  * **TTS 語音**：整合 Web Speech API（`ja-JP`），自動朗讀單字與例句。
* **進度記憶**：系統會自動記住每個牌組的學習進度（Session Storage），關閉瀏覽器後重開也能接續學習。

### 3. 使用者體驗優化

* **RWD 響應式設計**：基於 Bootstrap 5，在手機、平板與電腦上皆能完美顯示。
* **快速篩選**：清單頁面支援即時關鍵字搜尋與多條件篩選（詞性 + 分類）。

---

## 🛠 技術架構

* **後端語言**：Python 3.x
* **Web 框架**：Flask
* **資料庫**：SQLite 3（輕量級，無需額外安裝伺服器）
* **前端技術**：HTML5、CSS3、JavaScript（ES6+）
* **UI 框架**：Bootstrap 5.3

---

## 📂 專案結構

```text
.
├── app.py                       # 核心後端：路由處理、資料庫連線、邏輯控制
├── jp_db.db                     # 資料庫文件（首次執行時自動生成）
├── README.md                    # 專案說明文件
└── templates/                   # 前端 HTML 範本
    ├── home.html                # 首頁：功能入口
    ├── list_template.html       # 清單頁共用範本（Jinja2 繼承）
    ├── list_vocab.html          # 單字清單頁
    ├── list_grammar.html        # 文法清單頁
    ├── add_vocab.html           # 新增單字表單
    ├── add_grammar.html         # 新增文法表單
    ├── edit_item.html           # 編輯項目表單（通用）
    ├── categories_overview.html # 分類管理與統計
    ├── flashcard_select.html    # 單字卡：設定與篩選頁
    └── flashcard_deck.html      # 單字卡：播放與學習主畫面
```

---

## 🚀 安裝與執行步驟

### 1. 環境準備

請確保你的電腦已安裝 **Python 3.8** 或以上版本。

### 2. 下載專案

將所有檔案放入同一個資料夾中。

### 3. 安裝依賴套件

本專案僅依賴 Flask。開啟終端機（Terminal / CMD）並執行：

```bash
pip install flask
```

### 4. 啟動應用程式

在專案資料夾內執行以下指令：

```bash
python app.py
```

當看到類似以下訊息時，代表伺服器已啟動：

```
Running on http://127.0.0.1:5000
```

### 5. 開始使用

開啟瀏覽器（建議使用 Chrome、Edge 或 Safari 以獲得最佳 TTS 支援），輸入網址：

```
http://127.0.0.1:5000
```

---

## 🗄 資料庫設計 (Database Schema)

系統在首次啟動時會自動建立 `jp_db.db`，並初始化以下兩張資料表。

### 1. `vocab`（單字表）

用於儲存單字相關資料。

| 欄位名稱             | 資料型態      | 說明                    |
| ---------------- | --------- | --------------------- |
| id               | INTEGER   | 主鍵（Auto Increment）    |
| term             | TEXT      | 單字（例如：食べる）            |
| kana             | TEXT      | 假名讀音（例如：たべる）          |
| pos              | TEXT      | 詞性（例如：動詞、N1）          |
| definition       | TEXT      | 中文解釋                  |
| example_sentence | TEXT      | 日文例句                  |
| created_at       | TIMESTAMP | 建立時間（預設當下時間）          |
| categories       | TEXT      | 分類標籤（以逗號分隔，如 `N5,生活`） |

### 2. `grammar`（文法表）

用於儲存文法相關資料。

| 欄位名稱             | 資料型態      | 說明                 |
| ---------------- | --------- | ------------------ |
| id               | INTEGER   | 主鍵（Auto Increment） |
| term             | TEXT      | 文法條目（例如：～てはいけない）   |
| connection       | TEXT      | 接續方式（例如：動詞て形）      |
| definition       | TEXT      | 中文解釋               |
| example_sentence | TEXT      | 日文例句               |
| created_at       | TIMESTAMP | 建立時間（預設當下時間）       |
| categories       | TEXT      | 分類標籤（以逗號分隔的字串）     |

---

## 📝 詳細使用說明

### 🟢 新增資料 (Add)

1. 點擊首頁的「新增單字」或「新增文法」。
2. 填寫必要欄位（單字／文法、解釋）。
3. 分類設定：

   * 可直接勾選已存在的分類。
   * 若需新分類，在下方文字框輸入（多個分類用逗號隔開），系統會自動建立。
4. 按下「新增」按鈕。
5. 系統會自動進行防呆檢查（防止全空白輸入或 SQL Injection 字符）。

### 🔵 瀏覽與管理 (List & Edit)

* 進入「單字清單」或「文法清單」。
* **搜尋與篩選**：利用頂部的搜尋框或下拉選單，快速找到特定資料。
* **編輯**：點擊列表右側的「✏️」按鈕進入編輯模式。
* **刪除**：點擊「🗑️」按鈕，確認後即可刪除資料。
* **聽取發音**：點擊列表中的 🔊 圖示或例句，即可播放語音。

### 🟡 分類總覽 (Categories)

* 點擊首頁的「分類總覽」。
* 查看所有分類及其包含的單字／文法數量。
* 點擊分類卡片可直接跳轉至該分類的篩選清單。
* **刪除分類**：點擊卡片右上角的 `X`，可將該分類標籤從所有關聯的單字／文法中移除（不會刪除單字本身，僅移除標籤）。

### 🟣 單字卡學習 (Flashcards)

1. 點擊首頁的「單字卡學習模式」。
2. 設定篩選條件：

   * 內容：僅單字、僅文法、或全部混合。
   * 分類：針對特定主題複習。
   * 詞性：針對特定詞性特訓。
3. 點擊「載入並開始」。

**操作介面說明**：

* 點擊卡片翻面（查看中文解釋）。
* 點擊「▶️ 自動播放」開啟循環模式，可由下拉選單調整秒數。
* 點擊例句旁的 🔊 按鈕單獨播放例句語音。
* 點擊「下一個」或「上一個」手動切換卡片。

---

## ⚠️ 注意事項

* **瀏覽器支援**：由於使用 Web Speech API，建議使用 Chrome、Edge、Safari 等現代瀏覽器以確保語音功能正常運作。
* **資料備份**：所有資料皆儲存於 `jp_db.db` 檔案中。若要備份資料，只需複製此檔案即可。
